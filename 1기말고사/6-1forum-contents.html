<!DOCTYPE html>
<html>
   
<head>
    <link rel="stylesheet" type="text/css" href="style_layout.css">
    <link rel="stylesheet" type="text/css" href="style_color.css">
    <meta author="ì†Œí”„íŠ¸ì›¨ì–´í•™ê³¼ 202121028 ê¹€ë™ìš°">
    <meta charset="utf-8"/>
</head>

<body>
    <div class="background">

        <p class="big_title">ForumğŸ—£ï¸</p>

        <div id="contents_title">
            <p id="contents_title_text"></p>
            <p id="contents_title_like"></p>
            <p id="contents_title_date"></p>
            
        </div>

        <form>
            <textarea name="contents" id="contents_contents" value="" rows="30" placeholder="ë‚´ìš©" disabled></textarea>
        </form>

        <div id="bottom_buttons3">
            <input type="button" value="ëª©ë¡" class="button7" onclick="go_to_list()">
            <input type="button" value="ì¢‹ì•„ìš”" class="button7" onclick="like_pressed()">
        </div>

        <div id="bottom_buttons4">
            <a><input type="button" value="ì‚­ì œ" class="button4" onclick="before_delete_this()"></a>
            <a><input type="button" value="ìˆ˜ì •" class="button4" onclick="go_to_edit()"></a>
        </div>
    </div>
</body>

    <script>
        
        var output = localStorage.getItem("board");
        var board = JSON.parse(output);//localstorageì— ì €ì¥ëœ boardë¥¼ ë¶ˆëŸ¬ì˜´

        function set_values(){
            num = parseInt(window.localStorage.getItem("forum_value_1"));

            var title = document.getElementById("contents_title_text");//DOM
            var contents = document.getElementById("contents_contents");
            var date = document.getElementById("contents_title_date");
            var like = document.getElementById("contents_title_like");
            title.innerHTML = "&nbsp;"+board[num][0];//boardì—ì„œ ê°€ì ¸ì˜¨ ë°°ì—´ ê°’ í•˜ë‚˜ì”© ë„£ì–´ì¤Œ
            contents.value = board[num][1];
            date.innerHTML = "ì‘ì„±ì¼: "+board[num][2]+"&nbsp;|&nbsp;ì¢‹ì•„ìš”:&nbsp;";
            like.innerHTML = board[num][3]+"&nbsp;";
        }
        set_values();

        function like_pressed() {//ì¢‹ì•„ìš” ë²„íŠ¼ ëˆŒë €ì„ë•Œ ì‹¤í–‰
            var ddd = document.getElementById("contents_title_like");
            var aaa = parseInt(ddd.innerText);
            aaa = aaa+1;
            ddd.innerHTML = aaa+"&nbsp;";//ì´ë ‡ê²Œ í•´ì„œ ì¼ë‹¨ í™”ë©´ì— ë³´ì´ëŠ” ì¢‹ì•„ìš” ê°’ì„ 1ì”© ì˜¬ë ¤ì¤Œ
            
            num = parseInt(window.localStorage.getItem("forum_value_1"));//6forumì—ì„œ ë³´ë‚´ì¤€ ì¸ë±ìŠ¤ ê°’ì„ localstorageì—ì„œ ê°€ì ¸ì™€ì„œ numì— ì €ì¥í•¨
            board[num][3] = parseInt(board[num][3]) + 1;//boardì˜ í•´ë‹¹ ê¸€ likeê°’ì— ì§ì ‘ 1ì”© ë”í•´ì¤Œ

            apply_change();//likeê°’ì´ ë³€ê²½ëœ boardë¥¼ ë‹¤ì‹œ localstorageì— ì €ì¥í•´ì„œ ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•¨
            //ì´ë ‡ê²Œ í•´ì„œ 6forumì˜ ê¸€ ëª©ë¡ì—ë„ ëŠ˜ì–´ë‚œ ì¢‹ì•„ìš” ìˆ«ìê°€ ì˜ ë°˜ì˜ë¨.
        }

        function go_to_edit(){//ê¸€ í¸ì§‘ í˜ì´ì§€ë¡œ ê°€ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥í•˜ê²Œ í•¨
            var admin_pwd = "1234";
            while(true){
                var input_pwd = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.",);
                if(admin_pwd == input_pwd){
                    location.replace("6-2forum-edit.html");//ì´ë™
                    break;
                }
                else if(input_pwd == null){
                    break;
                    
                }
            }
        }

        function before_delete_this(){//ì‚­ì œí•˜ê¸° ì „ì— ë¹„ë°€ë²ˆí˜¸ ì…ë ¥í•˜ê²Œ í•¨
            var admin_pwd = "1234";
            while(true){
                var input_pwd = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.",);
                if(admin_pwd == input_pwd){
                    delete_this();
                    break;
                }
                else if(input_pwd == null){
                    break;
                }
            }
        }

        function delete_this(){//before_delete_this() í•¨ìˆ˜ì—ì„œ ë„˜ì–´ì™€ì„œ ì‹¤í–‰
            alert("'"+board[num][0]+"'"+" ê¸€ì„ ì‚­ì œí•©ë‹ˆë‹¤.")

            num = parseInt(window.localStorage.getItem("forum_value_1"));
            board.splice(num,1);//.spliceì“°ë©´ ìë™ìœ¼ë¡œ ë’¤ì— ìˆëŠ” ë°°ì—´ë“¤ ì¸ë±ìŠ¤ ë•¡ê²¨ì£¼ë„¤ ê°œê¿€ë”±~

            apply_change();//ì‚­ì œí•˜ê³  localstorageì— boradì˜ ë³€ê²½ì‚¬í•­ ì €ì¥

            location.replace("6forum.html");
        }

        function go_to_list(){
            location.replace("6forum.html");
        }

        function apply_change(){
            window.localStorage.setItem("board",JSON.stringify(board));//localstorageì— ë°°ì—´ì„ ì €ì¥í•˜ëŠ” ë°©ë²•
        }
    </script>
</html>